# Cocos Creator 微信小游戏内置资源打包插件

插件功能：使用Cocos Creator构建微信小游戏项目时，会自动打包指定必要的内置资源到首包。有效解决启动场景因网络延迟或加载失败而导致的黑屏/卡死问题。

## 解决的具体问题：
1. 在玩家首次启动游戏时，加载启动场景/首屏会从远程加载资源，资源在下载过程会出现短暂的黑屏甚至卡死。
2. 其他资源加载问题，比如Cocos Creator 2.2.0华为快游戏播放音频时会出现卡顿，把对应的音频文件夹打包到包里可以解决这个问题。

## 解决思路：
把启动场景所依赖的必要资源单独放在包里面（本地），其他资源放在服务器

## 使用方法：
1. 把该插件文件夹拷贝到{项目根目录}/packages下，重启Cocos Creator生效。如果想全局所有项目使用该插件，把插件文件夹拷贝到 {用户名}/.CocosCreator/packages下。
2. 构建微信小游戏项目，勾选MD5 cache，取消勾选调试模式（正式打包才启用该插件功能）
3. 构建完成后，会多出一个res_internal文件夹，这个文件夹就是内置的资源。把原本res文件夹资源上传到服务器后，移除res文件夹，最后把res_internal重命名为res。

## 温馨提示：
微信官方限制首包最大为4M，所以启动场景占用的资源要尽量的小。建议使用独立的图集，不要依赖其他与启动场景无关的资源。如果对字体有要求也尽量不要放TTF文件，使用图字代替会更省资源。

## 扩展功能，如果你还想打包其他资源参考下面的例子
打包文件夹 queryAssets('db://assets/resources/sounds/**/*');
打包具体文件 queryAssets('db://assets/RewardView.prefab');

## 版本更新日志：

### 1.0.1
1. 修复ttf字体文件拷贝路径错误的问题
2. 修复asset互相依赖导致插件死循环

### 1.0.0 
1. 修复构建mp3等资源只拷贝了配置文件，没有拷贝资源本身的问题